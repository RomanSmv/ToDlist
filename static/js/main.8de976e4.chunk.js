(this.webpackJsonptodlist=this.webpackJsonptodlist||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o);n(104),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(105);var c,l,s=n(174),u=n(175),d=n(176),m=n(166),f=n(131),E=n(170),b=n(179),O=n(177),g=n(14),h=n(178),p=n(184),v=n(181),T=n(9),j=n(80),I=n.n(j).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"2c8164cb-8938-4b6c-9f69-8a7ff54d8100"}}),S=function(e,t){return I.put("todo-lists/".concat(e),{title:t})},k=function(e){return I.delete("todo-lists/".concat(e))},C=function(e){return I.post("todo-lists",{title:e})},y=function(){return I.get("todo-lists")},A=function(e){return I.get("todo-lists/".concat(e,"/tasks"))},L=function(e,t){return I.post("todo-lists/".concat(e,"/tasks"),{title:t})},D=function(e,t){return I.delete("todo-lists/".concat(e,"/tasks/").concat(t))},w=function(e,t,n){return I.put("todo-lists/".concat(e,"/tasks/").concat(t),n)},P=function(e){return I.post("auth/login",e)},N=function(){return I.get("auth/me")},R=function(){return I.delete("auth/login")};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.draft=3]="draft"}(c||(c={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(l||(l={}));var F=function(e,t){e.messages.length?t(U(e.messages[0])):t(U("Some error occurred")),t(H("failed"))},x=function(e,t){t(U(e.message)),t(H("failed"))},G={isLoggedIn:!1},K=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},M={status:"loading",error:" error message",isInitialized:!1},U=function(e){return{type:"APP/SET-ERROR",error:e}},H=function(e){return{type:"APP/SET-STATUS",status:e}};function V(e){return r.a.createElement(v.a,Object.assign({elevation:6,variant:"filled"},e))}function Z(){var e=Object(g.c)((function(e){return e.app.error})),t=Object(g.b)(),n=function(e,n){"clickaway"!==n&&t(U(null))},a=null!==e;return r.a.createElement(p.a,{open:a,autoHideDuration:3e3,onClose:n},r.a.createElement(V,{onClose:n,severity:"error"},"This is a success message!"))}var q=n(38),z=[],B=n(171),J=n(130),Y=n(43),W=n(180),$=n(168),_=r.a.memo((function(e){var t=e.addItem,n=e.disabled,o=void 0!==n&&n;console.log("called App");var i=Object(a.useState)(""),c=Object(Y.a)(i,2),l=c[0],s=c[1],u=Object(a.useState)(null),d=Object(Y.a)(u,2),f=d[0],E=d[1],b=function(){""!==l.trim()?(t(l),s("")):E("Title is required")};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",disabled:o,value:l,onChange:function(e){s(e.currentTarget.value)},onKeyPress:function(e){null!==f&&E(null),13===e.charCode&&b()},error:!!f,label:"Title",helperText:f}),r.a.createElement(m.a,{color:"primary",onClick:b,disabled:o},r.a.createElement($.a,null))))})),Q=n(88),X=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(Y.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(e.title),l=Object(Y.a)(c,2),s=l[0],u=l[1];return o?r.a.createElement(W.a,{variant:"outlined",value:s,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.onChange(s)}}):r.a.createElement("span",{onDoubleClick:function(){i(!0),u(e.title)}},e.title)})),ee=n(169),te={},ne=function(e,t,n){return function(a,r){a(H("loading"));var o=r().tasks[n].find((function(t){return t.id===e}));if(o){var i=Object(T.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},t);w(n,e,i).then((function(r){if(0===r.data.resultCode){var o=function(e,t,n){return{type:"UPDATE-TASK",todolistId:n,model:t,taskId:e}}(e,t,n);a(o)}else F(r.data,a);a(H("succeeded"))})).catch((function(e){x(e,a)}))}else console.warn("task not found in the state")}},ae=n(182),re=r.a.memo((function(e){var t=Object(g.b)(),n=Object(a.useCallback)((function(n){var a=n.currentTarget.checked;t(ne(e.task.id,{status:a?c.Completed:c.InProgress},e.todolistId))}),[t,e.task.id,e.task.status,e.todolistId]),o=Object(a.useCallback)((function(n){t(ne(e.task.id,{title:n},e.todolistId))}),[t,e.task.id,e.todolistId]),i=Object(a.useCallback)((function(){var n,a,r=(n=e.todolistId,a=e.task.id,function(e){e(H("loading")),D(n,a).then((function(t){var r=function(e,t){return{type:"REMOVE-TASK",todolistId:e,taskId:t}}(n,a);e(r),e(H("succeeded"))})).catch((function(t){x(t,e)}))});t(r)}),[t,e.todolistId,e.task.id]);return r.a.createElement("li",{key:e.task.id,className:e.task.status===c.Completed?"is-done":""},r.a.createElement(ae.a,{color:"primary",onChange:n,checked:e.task.status===c.Completed}),r.a.createElement(X,{title:e.task.title,onChange:o}),r.a.createElement(m.a,{onClick:i},r.a.createElement(ee.a,null)))})),oe=r.a.memo((function(e){var t=e.demo,n=void 0!==t&&t,o=Object(Q.a)(e,["demo"]);console.log("called App"),Object(a.useEffect)((function(){var e;n||l((e=o.todolist.id,function(t){t(H("loading")),A(e).then((function(n){var a=n.data.items;t(function(e,t){return{type:"SET-TASKS",tasks:e,todolistId:t}}(a,e)),t(H("succeeded"))}))}))}),[]);var i=Object(g.c)((function(e){return e.tasks[o.todolist.id]})),l=Object(g.b)(),s=Object(a.useCallback)((function(e){return o.changeTodoListTitle(o.todolist.id,e)}),[o.changeTodoListTitle,o.todolist.id]),u=Object(a.useCallback)((function(){o.changeFilter(o.todolist.id,"all")}),[o.changeFilter,o.todolist.id]),d=Object(a.useCallback)((function(){return o.changeFilter(o.todolist.id,"active")}),[o.changeFilter,o.todolist.id]),f=Object(a.useCallback)((function(){return o.changeFilter(o.todolist.id,"completed")}),[o.changeFilter,o.todolist.id]),b=i,O=b;"active"===o.todolist.filter&&(O=b.filter((function(e){return e.status===c.New}))),"completed"===o.todolist.filter&&(O=b.filter((function(e){return e.status===c.Completed})));var h=Object(a.useCallback)((function(e){var t=function(e,t){return function(n){n(H("loading")),L(t,e).then((function(e){if(0===e.data.resultCode){var t=function(e){return{type:"ADD-TASK",task:e}}(e.data.data.item);n(t),n(H("succeeded"))}else F(e.data,n)})).catch((function(e){x(e,n)}))}}(e,o.todolist.id);l(t)}),[l]);return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(X,{title:o.todolist.title,onChange:s}),r.a.createElement(m.a,{onClick:function(){return o.onRemoveToDoList(o.todolist.id)},disabled:"loading"===o.todolist.entityStatus},r.a.createElement(ee.a,null))),r.a.createElement(_,{addItem:h,disabled:"loading"===o.todolist.entityStatus}),r.a.createElement("ul",null,O.map((function(e){return r.a.createElement(re,{key:e.id,task:e,todolistId:o.todolist.id})}))),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"all"===o.todolist.filter?"outlined":"text",onClick:u,color:"primary"},"All "),r.a.createElement(E.a,{variant:"active"===o.todolist.filter?"outlined":"text",onClick:d},"Active"),r.a.createElement(E.a,{variant:"completed"===o.todolist.filter?"outlined":"text",onClick:f},"Completed")))})),ie=n(15),ce=function(e){var t=Object(g.b)(),n=Object(g.c)((function(e){return e.todolists})),o=Object(g.c)((function(e){return e.auth.isLoggedIn})),i=Object(a.useCallback)((function(e){var n,a=(n=e,function(e){e(H("loading")),e({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:n,status:"loading"}),k(n).then((function(t){e(function(e){return{type:"REMOVE-TODOLIST",id:e}}(n)),e(H("succeeded"))})).catch((function(t){x(t,e)}))});t(a)}),[t]),c=Object(a.useCallback)((function(e,n){t(function(e,t){return function(n){n(H("loading")),S(e,t).then((function(a){n(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(e,t)),n(H("succeeded"))})).catch((function(e){x(e,n)}))}}(e,n))}),[t]),l=Object(a.useCallback)((function(e,n){t(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",id:e,filter:t}}(e,n))}),[t]),s=Object(a.useCallback)((function(e){var n=function(e){return function(t){t(H("loading")),C(e).then((function(e){t({type:"ADD-TODOLIST",todolist:e.data.data.item}),t(H("succeeded"))})).catch((function(e){x(e,t)}))}}(e);t(n)}),[t]);return Object(a.useEffect)((function(){!e.demo&&o&&t((function(e){e(H("loading")),y().then((function(t){e({type:"SET-TODOLISTS",todolists:t.data}),e(H("succeeded"))})).catch((function(t){x(t,e)}))}))}),[t]),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{container:!0},r.a.createElement(_,{addItem:s})),r.a.createElement(B.a,{container:!0,spacing:3},n.map((function(t){return r.a.createElement(B.a,{item:!0},r.a.createElement(J.a,{style:{padding:"10px"}},r.a.createElement(oe,{todolist:t,key:t.id,changeFilter:l,onRemoveToDoList:i,changeTodoListTitle:c,demo:e.demo})))})))):r.a.createElement(ie.a,{to:"/login"})},le=n(51),se=n(185),ue=n(167),de=n(172),me=n(173),fe=n(87),Ee=function(){console.log("fasfsafas");var e=Object(g.b)(),t=Object(g.c)((function(e){return e.auth.isLoggedIn})),n=Object(fe.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<=6&&(t.password="min 6 symbols"):t.password="Password is required",t},onSubmit:function(t){var n;e((n=t,function(e){e(H("loading")),P(n).then((function(t){0===t.data.resultCode?(e(K(!0)),e(H("succeeded"))):F(t.data,e)})).catch((function(t){x(t,e)}))})),alert(JSON.stringify(t))}});return t?r.a.createElement(ie.a,{to:"/"}):r.a.createElement(B.a,{container:!0,justify:"center"},r.a.createElement(B.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:n.handleSubmit},r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(de.a,null,r.a.createElement(W.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?r.a.createElement("div",{style:{color:"red"}},n.errors.email):null,r.a.createElement(W.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.email&&n.errors.password?r.a.createElement("div",{style:{color:"red"}},n.errors.password):null,r.a.createElement(me.a,{label:"Remember me",control:r.a.createElement(ae.a,{onChange:n.handleChange,checked:n.values.rememberMe,name:"rememberMe"})}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},be=r.a.memo((function(e){var t=e.demo,n=void 0!==t&&t,o=Object(g.c)((function(e){return e.app.status})),i=Object(g.c)((function(e){return e.app.isInitialized})),c=Object(g.c)((function(e){return e.auth.isLoggedIn})),l=Object(a.useCallback)((function(){p((function(e){e(H("loading")),R().then((function(t){0===t.data.resultCode?(e(K(!1)),e(H("succeeded"))):F(t.data,e)})).catch((function(t){x(t,e)}))}))}),[]),p=Object(g.b)();return Object(a.useEffect)((function(){n||p((function(e){N().then((function(t){e({type:"APP/SET-IS-INITIALIZED",value:!0}),0===t.data.resultCode&&e(K(!0))}))}))}),[]),i?r.a.createElement("div",{className:"App"},r.a.createElement(Z,null),r.a.createElement(u.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(O.a,null)),r.a.createElement(f.a,{variant:"h6"},"News"),c&&r.a.createElement(E.a,{color:"inherit",onClick:l},"Log out")),"loading"===o&&r.a.createElement(h.a,null)),r.a.createElement(b.a,{fixed:!0},r.a.createElement(ie.d,null,r.a.createElement(ie.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ce,{demo:n})}}),r.a.createElement(ie.b,{path:"/login",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(ie.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(ie.a,{from:"*",to:"/404"})))):r.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},r.a.createElement(s.a,null))})),Oe=function(){return r.a.createElement(le.a,null,r.a.createElement(be,null))},ge=n(40),he=n(86),pe=Object(ge.c)({todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"ADD-TODOLIST":var n=Object(T.a)(Object(T.a)({},t.todolist),{},{filter:"all",entityStatus:"idle"});return[n].concat(Object(q.a)(e));case"CHANGE-TODOLIST-TITLE":var a=e.find((function(e){return e.id===t.id}));return a&&(a.title=t.title),Object(q.a)(e);case"CHANGE-TODOLIST-FILTER":var r=e.find((function(e){return e.id===t.id}));return r&&(r.filter=t.filter),Object(q.a)(e);case"CHANGE-TODOLIST-ENTITY-STATUS":var o=e.find((function(e){return e.id===t.id}));return o&&(o.entityStatus=t.status),Object(q.a)(e);case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{filter:"all",entityStatus:"idle"})}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":var n=Object(T.a)({},e),a=e[t.todolistId],r=a.filter((function(e){return e.id!==t.taskId}));return n[t.todolistId]=r,n;case"ADD-TASK":var o=Object(T.a)({},e),i=o[t.task.todoListId],c=[t.task].concat(Object(q.a)(i));return o[t.task.todoListId]=c,o;case"UPDATE-TASK":var l=Object(T.a)({},e),s=e[t.todolistId],u=s.map((function(e){return e.id===t.taskId?Object(T.a)(Object(T.a)({},e),t.model):e}));return l[t.todolistId]=u,l;case"ADD-TODOLIST":var d=Object(T.a)({},e);return d[t.todolist.id]=[],d;case"REMOVE-TODOLIST":var m=Object(T.a)({},e);return delete m[t.id],m;case"SET-TODOLISTS":var f=Object(T.a)({},e);return t.todolists.forEach((function(e){f[e.id]=[]})),f;case"SET-TASKS":var E=Object(T.a)({},e);return E[t.todolistId]=t.tasks,E;default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(T.a)(Object(T.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(T.a)(Object(T.a)({},e),{},{error:t.error});case"APP/SET-IS-INITIALIZED":return Object(T.a)(Object(T.a)({},e),{},{isInitialized:t.value});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),ve=Object(ge.d)(pe,Object(ge.a)(he.a));i.a.render(r.a.createElement(g.a,{store:ve},r.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(129)}},[[99,1,2]]]);
//# sourceMappingURL=main.8de976e4.chunk.js.map